1. Â¿QuÃ© ventaja tiene usar una versiÃ³n SNAPSHOT?

Cuando pones en tu pom.xml algo como:

<version>1.0-SNAPSHOT</version>


estÃ¡s diciendo: â€œesta versiÃ³n es inestable / en desarrolloâ€.

Ventajas principales

Compartir builds de desarrollo entre equipos
Si subes tu artefacto SNAPSHOT a Nexus/Artifactory:

Otro proyecto puede depender de 1.0-SNAPSHOT.

Cuando tÃº vuelves a hacer mvn deploy, se sube una nueva build con el mismo nÃºmero de versiÃ³n, pero con un timestamp diferente.

Al hacer mvn clean install -U, los demÃ¡s bajan la Ãºltima versiÃ³n del SNAPSHOT.

Iterar rÃ¡pido sin cambiar la versiÃ³n todo el tiempo
En lugar de:

1.0.1, 1.0.2, 1.0.3 por cada cambio
usas 1.0-SNAPSHOT mientras estÃ¡s desarrollando y solo cuando se â€œcongelaâ€ para producciÃ³n la cambias a 1.0.0 (release estable).

Separar claro â€œen desarrolloâ€ vs â€œliberadoâ€

1.0-SNAPSHOT â†’ CI, QA, integraciÃ³n, rama develop.

1.0.0 â†’ release estable, reproducible, etiquetada.

Regla sana: SNAPSHOT para cosas que aÃºn pueden cambiar sin garantÃ­a de estabilidad. Release (sin SNAPSHOT) para producciÃ³n.



-----------------------------------
2. Â¿En quÃ© momento se usan los JAR de ~/.m2/repository?

Â¿Se meten al proyecto? Â¿Se incluyen en target?

Importante: hay dos cosas distintas

Usar las dependencias en el classpath (compilar / test / ejecutar).

Empaquetar dependencias dentro de tu artefacto final (JAR, WAR, fat JAR, etc.).

a) Â¿Se usan los JAR de ~/.m2/repository?

SÃ­, SIEMPRE.
Cuando haces:

mvn compile
mvn test
mvn package


Maven:

arma un classpath con:

tus clases compiladas (target/classes)

las dependencias que estÃ¡n en ~/.m2/repository

y asÃ­ el maven-compiler-plugin, maven-surefire-plugin, etc., pueden compilar, ejecutar tests, etc.

Los JAR no se copian al cÃ³digo fuente, pero sÃ­ se usan desde ~/.m2/repository para compilar y probar.

b) Â¿QuÃ© hay realmente en target/?

En un proyecto Java simple con empaquetado jar y sin Shade ni Spring Boot, al hacer:

mvn clean package


tendrÃ¡s algo como:

target/
  classes/              # tus .class
  test-classes/         # clases de test
  app-sample-1.0.0.jar  # tu JAR principal (solo TU cÃ³digo + recursos)


Ese app-sample-1.0.0.jar normalmente NO incluye las dependencias externas.
Incluye:

tus .class

tus resources (.properties, etc.)

META-INF/MANIFEST.MF

Pero las dependencias se siguen leyendo desde:

el classpath, apuntando a ~/.m2/repository o a libs externas.

c) Â¿CuÃ¡ndo SÃ se incluyen dependencias en el JAR?

Cuando usas plugins como:

maven-shade-plugin â†’ crea fat JAR (todas las dependencias dentro del JAR).

spring-boot-maven-plugin â†’ crea app-sample-1.0.0.jar con un layout especial de Boot que contiene todas las deps.

AhÃ­ sÃ­, el JAR incluye:

tu cÃ³digo

todas las dependencias (JARs reempaquetados)

Y lo ejecutas con:

java -jar target/app-sample-1.0.0-prod.jar



--------------------------------
3. Comandos para una â€œreinstalaciÃ³n limpiaâ€ de dependencias

Depende de quÃ© tan â€œlimpioâ€ quieras dejar todo ğŸ˜…

âœ… Limpiar solo el build (no toca deps)
mvn clean


Esto borra target/, pero no toca ~/.m2/repository.

âœ… Forzar actualizaciÃ³n de dependencias desde remoto
mvn clean install -U


-U = update snapshots (y puede actualizar tambiÃ©n releases).
Ãštil cuando cambiÃ³ algo en el repo remoto y tu repo local tiene una versiÃ³n cacheada.

âœ… Borrar una dependencia especÃ­fica del repo local

Por ejemplo, quieres que JUnit se vuelva a descargar:

rm -rf ~/.m2/repository/org/junit
mvn clean test


Maven volverÃ¡ a descargar justo lo que falte.

âœ… Purge del repositorio local con Maven

MÃ¡s â€œeleganteâ€ que rm -rf:

mvn dependency:purge-local-repository


Puedes combinarlo con opciones:

mvn dependency:purge-local-repository -DreResolve=false


o

mvn dependency:purge-local-repository -DactTransitively=false -DreResolve=false

âœ… Borrar TODO el repo local (bruto pero efectivo ğŸ˜ˆ)
rm -rf ~/.m2/repository


Luego, el siguiente mvn clean install va a descargar todo de cero.


-----------------------------------
4. Â¿CÃ³mo se configura un repositorio remoto?

Tienes dos niveles:

En el POM â†’ para decir de dÃ³nde bajar dependencias.

En settings.xml â†’ para credenciales, mirrors, etc.

a) Repositorios remotos en el pom.xml

Para decirle a Maven â€œademÃ¡s de Maven Central, usa este Nexus/Artifactoryâ€:

<repositories>
  <repository>
    <id>company-central</id>
    <url>https://nexus.miempresa.com/repository/maven-public/</url>
  </repository>
</repositories>


Si tienes plugins en un repo diferente:

<pluginRepositories>
  <pluginRepository>
    <id>company-plugins</id>
    <url>https://nexus.miempresa.com/repository/maven-plugins/</url>
  </pluginRepository>
</pluginRepositories>

b) Repositorio para subir artefactos (releases / snapshots)

Esto va en pom.xml â†’ <distributionManagement>:

<distributionManagement>
  <repository>
    <id>company-releases</id>
    <url>https://nexus.miempresa.com/repository/maven-releases/</url>
  </repository>
  <snapshotRepository>
    <id>company-snapshots</id>
    <url>https://nexus.miempresa.com/repository/maven-snapshots/</url>
  </snapshotRepository>
</distributionManagement>


Luego haces:

mvn deploy


y Maven sube el artefacto al repo correspondiente (releases o snapshots segÃºn la versiÃ³n del proyecto).

c) Credenciales y mirrors en settings.xml

En ~/.m2/settings.xml:

<servers>
  <server>
    <id>company-releases</id>
    <username>tu_usuario</username>
    <password>tu_password_o_token</password>
  </server>
  <server>
    <id>company-snapshots</id>
    <username>tu_usuario</username>
    <password>tu_password_o_token</password>
  </server>
</servers>


Y un mirror para que TODO lo resuelva via Nexus/Artifactory:

<mirrors>
  <mirror>
    <id>company-mirror</id>
    <name>Company Maven Mirror</name>
    <url>https://nexus.miempresa.com/repository/maven-public/</url>
    <mirrorOf>*</mirrorOf>
  </mirror>
</mirrors>


Con esto:

Aunque tu POM diga â€œcentralâ€,

Maven en realidad usa el mirror de tu empresa.

Si quieres, en el siguiente paso armamos:

un ejemplo real de settings.xml corporativo,

y un POM con distributionManagement + repositories + SNAPSHOT vs release,
como si fueras a usar tu propio Nexus en la chamba.